import{isNullOrWhiteSpaces,sleep}from"./general.js";export default class Accordion{constructor(t,e,s,i=!0){if(this.isToggling=!1,this.buttonsActiveClass="active",this.contentActiveClass="active",isNullOrWhiteSpaces(t,e)||s<0)throw"[ACCORDION] Incorrect arguments!";if(this.buttons=document.querySelectorAll(t),this.contentElements=Array.from(document.querySelectorAll(e).values()),this.animationDuration=s+100,this.buttons.length!=this.contentElements.length)throw"[ACCORDION] The count of buttons and content-elements is not equal.";i&&(this.buttons[0].classList.add("active"),this.contentElements[0].classList.add("active"));for(let n of this.buttons)n.addEventListener("click",(()=>{this.toggleActiveElements(n)}));for(const n of this.contentElements)0==n.classList.contains("active")&&n.setAttribute("hidden","")}toggleActiveElements(t){if(t.classList.contains("active")||this.isToggling)return;this.isToggling=!0;for(let s of this.buttons)s.classList.remove("active");t.classList.add("active");let e=this.contentElements[t.dataset.toggleElemNumber];for(let s of this.contentElements)s.classList.remove("active"),setTimeout((async()=>{s!=e?s.setAttribute("hidden",""):e.removeAttribute("hidden"),await sleep(10),e.classList.add("active"),this.isToggling=!1}),this.animationDuration)}}