var __awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function a(t){try{r(n.next(t))}catch(e){s(e)}}function c(t){try{r(n.throw(t))}catch(e){s(e)}}function r(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,c)}r((n=n.apply(t,e||[])).next())}))};import{isNullOrWhiteSpaces}from"./general.js";export default class Accordion{constructor(t,e,i,n=!0){if(this.isToggling=!1,isNullOrWhiteSpaces(t,e)||i<0)throw"[ACCORDION] Incorrect arguments!";if(this.accordButtons=document.querySelectorAll(t),this.accordContentElements=Array.from(document.querySelectorAll(e).values()),this.animationDuration=i+100,this.accordButtons.length!=this.accordContentElements.length)throw"[ACCORDION] The count of buttons and content-elements must be more than zero.";n&&(this.accordButtons[0].classList.add("active"),this.accordContentElements[0].classList.add("active"));for(let o of this.accordButtons)o.addEventListener("click",(()=>{this.toggleActiveElements(o)}));for(const o of this.accordContentElements)0==o.classList.contains("active")&&o.setAttribute("hidden","")}toggleActiveElements(t){if(t.classList.contains("active")||this.isToggling)return;this.isToggling=!0;for(let i of this.accordButtons)i.classList.remove("active");let e;t.classList.add("active"),e=this.accordContentElements[t.dataset.toggleElemNumber];for(const i of this.accordContentElements)i.classList.remove("active"),setTimeout((()=>{i!=e?i.setAttribute("hidden",""):e.removeAttribute("hidden"),setTimeout((()=>{e.classList.add("active")}),10),this.togglingToFalseWithAwait(this)}),this.animationDuration)}togglingToFalseWithAwait(t){return __awaiter(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout((()=>{t.isToggling=!1}),t.animationDuration)))}))}}